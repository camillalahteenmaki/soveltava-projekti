(this.webpackJsonpfrontti=this.webpackJsonpfrontti||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var s=n(2),o=n.n(s),i=n(13),r=n.n(i),a=(n(22),n(14)),c=n(15),g=n(17),l=n(16),u=(n(23),n(24),n.p+"static/media/login.svg.ffe0c8d4.png"),d=n(0),h=function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(d.jsx)("div",{class:"imgcontainer",children:Object(d.jsx)("img",{src:u,alt:"Avatar",class:"avatar"})}),Object(d.jsxs)("div",{class:"w3-container",children:["Username: ",Object(d.jsx)("input",{type:"text",name:"loginUsername",onChange:e.onLoginChange})]}),Object(d.jsxs)("div",{class:"w3-container",children:["Password: ",Object(d.jsx)("input",{type:"password",name:"loginPassword",onChange:e.onLoginChange})]}),Object(d.jsx)("div",{class:"container",children:Object(d.jsx)("button",{input:"submit",children:"Log in"})}),Object(d.jsx)("div",{class:"container",children:Object(d.jsx)("button",{input:"submit",onClick:e.registerOrLogin,children:"Create account"})})]})})},b=n.p+"static/media/login.svg.ffe0c8d4.png",j=(n(26),function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(d.jsx)("div",{class:"imgcontainer",children:Object(d.jsx)("img",{src:b,alt:"Avatar",class:"avatar"})}),Object(d.jsxs)("div",{class:"w3-container",children:["Username: ",Object(d.jsx)("input",{type:"text",name:"registerUsername",onChange:e.onRegisterChange})]}),Object(d.jsxs)("div",{class:"w3-container",children:["Password: ",Object(d.jsx)("input",{type:"password",name:"registerPassword",onChange:e.onRegisterChange})]}),Object(d.jsx)("div",{class:"container",children:Object(d.jsx)("button",{input:"submit",children:"Register"})}),Object(d.jsx)("div",{class:"container",children:Object(d.jsx)("button",{input:"submit",onClick:e.registerOrLogin,children:"I already have an account"})})]})})}),m=(n(27),function(e){var t=e.onInputChange,n=e.onSubmit,s=e.user;return console.log(s),Object(d.jsx)("div",{className:"ma5 to",children:Object(d.jsx)("div",{className:"center",children:Object(d.jsxs)("div",{className:"form center pa4 br3 shadow-5",children:[Object(d.jsx)("input",{className:"f4 pa2 w-70 center",type:"text",onChange:t}),Object(d.jsx)("button",{className:"w-30 grow f4 link ph3 pv2 dib white bg-blue",onClick:n,children:"Detect"})]})})})}),p=(n(28),function(e){return Object(d.jsx)("div",{className:"center ma",children:Object(d.jsxs)("div",{className:"absolute mt2",children:[Object(d.jsx)("img",{id:"inputimage",alt:"",src:e.imageUrl,width:"500px",heigh:"auto"}),Object(d.jsx)("div",{className:"bounding-box",style:{top:e.box.topRow,right:e.box.rightCol,bottom:e.box.bottomRow,left:e.box.leftCol}})]})})}),x=function(e){var t=e.isLoggedIn,n=e.userWantsToRegister;return t?e.box!={}?Object(d.jsxs)("div",{children:[Object(d.jsx)(m,{onInputChange:e.onInputChange,onSubmit:e.onSubmit,user:e.user}),Object(d.jsxs)("h3",{children:["Hello ",e.user.username,"!"]}),Object(d.jsxs)("h3",{children:["You have recognized ",e.user.imageCount," images"]}),Object(d.jsx)(p,{box:e.box,imageUrl:e.imageUrl})]}):Object(d.jsxs)("div",{children:[Object(d.jsx)(m,{onInputChange:e.onInputChange,onSubmit:e.onSubmit,user:e.user}),Object(d.jsxs)("h3",{children:["Hello ",e.user.username,"!"]}),Object(d.jsxs)("h3",{children:["You have recognized ",e.user.imageCount," images"]})]}):n?Object(d.jsx)(j,{onSubmit:e.onUserRegister,onRegisterChange:e.onRegisterChange,registerOrLogin:e.registerOrLogin}):Object(d.jsx)(h,{onSubmit:e.onUserLogin,onLoginChange:e.onLoginChange,registerOrLogin:e.registerOrLogin})},O=n(3),f=n.n(O),v=function(e){Object(g.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).calculateFaceLocation=function(e){var t=e.data.outputs[0].data.regions[0].region_info.bounding_box,n=document.getElementById("inputimage"),s=Number(n.width),o=Number(n.height);return{leftCol:t.left_col*s,topRow:t.top_row*o,rightCol:s-t.right_col*s,bottomRow:o-t.bottom_row*o}},e.displayFaceBox=function(t){e.setState({box:t})},e.onInputChange=function(t){e.setState({imageUrl:t.target.value})},e.onLoginChange=function(t){"loginUsername"===t.target.name?e.setState({loginUsername:t.target.value}):"loginPassword"===t.target.name&&e.setState({loginPassword:t.target.value})},e.onRegisterChange=function(t){"registerUsername"===t.target.name?e.setState({registerUsername:t.target.value}):"registerPassword"===t.target.name&&e.setState({registerPassword:t.target.value})},e.onUserRegister=function(t){t.preventDefault();var n={username:e.state.registerUsername,password:e.state.registerPassword};f.a.post("http://localhost:8000/register",n).then((function(t){console.log(t),201===t.status&&e.setState({isLoggedIn:!0,loginUsername:t.data.username,loginPassword:t.data.password})})).catch((function(e){console.log("catch"),console.log(e),console.log(e.response),400!==e.response.status&&500!==e.response.status||window.alert(e.response.data)}))},e.registerOrLogin=function(t){t.preventDefault(),e.setState({userWantsToRegister:!e.state.userWantsToRegister})},e.onUserLogin=function(t){t.preventDefault();var n={username:e.state.loginUsername,password:e.state.loginPassword};f.a.post("http://localhost:8000/login",n).then((function(t){200===t.status&&(e.setState({isLoggedIn:!0}),e.setState({user:t.data}))})).catch((function(e){console.log("catch"),console.log(e.response),400===e.response.status&&window.alert(e.response.data)}))},e.onSubmit=function(t){t.preventDefault();var n={input:e.state.imageUrl};f.a.post("http://localhost:8000/imageurl",n).then((function(t){console.log(t),200===t.status&&(e.displayFaceBox(e.calculateFaceLocation(t)),e.incrementImage())})).catch((function(e){console.log(e)}))},e.incrementImage=function(){console.log(e.state.user);var t={id:e.state.user.id};f.a.put("http://localhost:8000/image",t).then((function(t){if(200===t.status){var n=e.state.user;console.log("USER: ",e.state.user),console.log("TMPUSER: ",n),n.imageCount++,e.setState({user:n})}})).catch((function(e){console.log(e)}))},e.state={loginUsername:"",loginPassword:"",registerUsername:"",registerPassword:"",isLoggedIn:!1,userWantsToRegister:!1,input:"",imageUrl:"",result:"",box:{},user:{}},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state,t=e.box,n=e.isLoggedIn,s=e.userWantsToRegister,o=e.result,i=e.imageUrl,r=e.user;return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(x,{onLoginChange:this.onLoginChange,onSubmit:this.onSubmit,onUserLogin:this.onUserLogin,onRegisterChange:this.onRegisterChange,onUserRegister:this.onUserRegister,box:t,isLoggedIn:n,registerOrLogin:this.registerOrLogin,userWantsToRegister:s,onInputChange:this.onInputChange,result:o,imageUrl:i,user:r})})}}]),n}(s.Component),C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,s=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),s(e),o(e),i(e),r(e)}))};n(47);r.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(v,{})}),document.getElementById("root")),C()}},[[48,1,2]]]);
//# sourceMappingURL=main.103af7cb.chunk.js.map